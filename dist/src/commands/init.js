"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const builders_1 = require("@discordjs/builders");
const discord_js_1 = require("discord.js");
const Config_1 = __importDefault(require("../utils/Config"));
const Constants_1 = require("../utils/Constants");
exports.default = {
    data: new builders_1.SlashCommandBuilder()
        .setName("init")
        .setDescription("Inits a specific bot message.")
        .addStringOption(opt => opt
        .setName("message")
        .setDescription("Select the bot message to init")
        .addChoice("Verification", "verification")
        .addChoice("Tickets", "tickets")
        .addChoice("Private Voices", "privatevoice")
        .addChoice("Roles (Requires CEO)", "roles")
        .setRequired(true)),
    run: async (interaction) => {
        const application = interaction.options.get("message").value;
        const verificationChannel = interaction.guild.channels.cache.find(c => c.id === Config_1.default.channels.verification);
        const ticketsChannel = interaction.guild.channels.cache.find(c => c.id === Config_1.default.channels.tickets);
        const rolesChannel = interaction.guild.channels.cache.find(c => c.id === Config_1.default.channels.roles);
        const privateVoiceChannel = interaction.guild.channels.cache.find(c => c.id === Config_1.default.channels.privateVoice);
        //@ts-ignore
        const member = interaction.guild.members.cache.find((m) => m.id === interaction.member.id);
        const completedEmbed = new discord_js_1.MessageEmbed()
            .setTitle(":white_check_mark: | Done!")
            .setDescription("The message has been sent successfully")
            .setColor("GREEN")
            .setTimestamp();
        await interaction.deferReply({ ephemeral: true });
        switch (application) {
            case "verification":
                if (member.permissions.has("ADMINISTRATOR") || member.roles.cache.find(r => r.id === Config_1.default.roles.staff)) {
                    const verificationButton = new discord_js_1.MessageActionRow()
                        .addComponents(new discord_js_1.MessageButton()
                        .setCustomId('verificationBtn')
                        .setLabel('Verify')
                        .setEmoji('‚úÖ')
                        .setStyle('SUCCESS'));
                    const verificationEmbed = new discord_js_1.MessageEmbed()
                        .setColor('#EE0000')
                        .setTitle('Verify yourself')
                        .setDescription(':flag_es: Verificate para obtener acceso al resto del servidor, en caso de tener algun problema no dudes en mandarle un MD a los staffs!\n\n:flag_us: Verify yourself to gain access to the rest of the server, in case of having any problem verifying don\'t think twice, and DM a Staff');
                    await verificationChannel.bulkDelete(100);
                    await verificationChannel.send({ embeds: [verificationEmbed], components: [verificationButton] });
                    //@ts-ignore
                    await interaction.editReply({ embeds: [completedEmbed], ephemeral: true });
                    break;
                }
                else {
                    interaction.reply({
                        embeds: [Constants_1.noPermsEmbed],
                        ephemeral: true
                    });
                    break;
                }
            case "tickets":
                if (member.permissions.has("ADMINISTRATOR") || member.roles.cache.find(r => r.id === Config_1.default.roles.staff)) {
                    const ticketsEmbed = new discord_js_1.MessageEmbed()
                        .setColor('#EE0000')
                        .setTitle('Tickets')
                        .setDescription(':flag_es: Haz click abajo para abrir un ticket\n\n:flag_us: Click down below to open a Ticket');
                    await ticketsChannel.bulkDelete(100);
                    await ticketsChannel.send({ embeds: [ticketsEmbed], components: [Constants_1.normalTicketButton, Constants_1.applyTicketButton] });
                    //@ts-ignore
                    await interaction.editReply({ embeds: [completedEmbed], ephemeral: true });
                    break;
                }
                else {
                    interaction.reply({
                        embeds: [Constants_1.noPermsEmbed],
                        ephemeral: true
                    });
                    break;
                }
            case "roles":
                if (member.permissions.has("ADMINISTRATOR") || member.roles.cache.find(r => r.id === Config_1.default.roles.ceo)) {
                    const rolesRow = new discord_js_1.MessageActionRow()
                        .addComponents(new discord_js_1.MessageSelectMenu()
                        .setCustomId('roles')
                        .setPlaceholder("No roles selected!")
                        .setMinValues(1)
                        .addOptions([
                        {
                            label: 'Ethical Hacker',
                            value: '888512901562925066',
                            emoji: 'üîß'
                        },
                        {
                            label: 'Pentester',
                            value: '888514696104275968',
                            emoji: 'ü™ì'
                        },
                        {
                            label: 'Cyber Security',
                            value: '888513751932887041',
                            emoji: 'üîê'
                        },
                        {
                            label: 'Game Dev',
                            value: '888543801587662878',
                            emoji: 'üëæ'
                        },
                        {
                            label: 'Discord Bot Dev',
                            value: '888519273838944298',
                            emoji: '‚öô'
                        },
                        {
                            label: 'Full-Stack',
                            value: '888510117157437461',
                            emoji: 'ü•á'
                        },
                        {
                            label: 'Back-End',
                            value: '888508286436012132',
                            emoji: 'üë•'
                        },
                        {
                            label: 'Front-End',
                            value: '888505358807629824',
                            emoji: 'üé®'
                        },
                        {
                            label: 'UX/UI',
                            value: '888531035082600499',
                            emoji: 'üìï'
                        },
                        {
                            label: 'Graphic Designer',
                            value: '888512471554465802',
                            emoji: 'üéâ'
                        }
                    ]));
                    const rolesEmbed = new discord_js_1.MessageEmbed()
                        .setColor("#EE0000")
                        .setTitle("Roles")
                        .setDescription(":flag_es: Selecciona tus roles en dependencia de tus conocimientos\n\n:flag_us: Select your roles in dependance of your knowledge");
                    await rolesChannel.bulkDelete(100);
                    await rolesChannel.send({ embeds: [rolesEmbed], components: [rolesRow] });
                    //@ts-ignore
                    await interaction.editReply({ embeds: [completedEmbed], ephemeral: true });
                }
                else {
                    interaction.reply({
                        embeds: [Constants_1.noPermsEmbed],
                        ephemeral: true
                    });
                    break;
                }
            case "privatevoice":
                if (member.permissions.has("ADMINISTRATOR") || member.roles.cache.find(r => r.id === Config_1.default.roles.staff)) {
                    const privateVoiceEmbed = new discord_js_1.MessageEmbed()
                        .setColor('#EE0000')
                        .setTitle('Private Voices')
                        .setDescription(':flag_es: Haz click abajo para crear t√∫ voz privada\n\n:flag_us: Click down below to create your private voice channel');
                    const privateVoiceButton = new discord_js_1.MessageActionRow()
                        .addComponents(new discord_js_1.MessageButton()
                        .setCustomId('privateVoiceBtn')
                        .setLabel('Create Voice')
                        .setEmoji('<:discord_voice_from_VEGA:899709000113868920>')
                        .setStyle('SECONDARY'), new discord_js_1.MessageButton()
                        .setCustomId('deletePrivateVoiceBtn')
                        .setLabel('Delete Voice')
                        .setEmoji('<:trashcan:900421048649015376>')
                        .setStyle("DANGER"));
                    await privateVoiceChannel.bulkDelete(100);
                    await privateVoiceChannel.send({ embeds: [privateVoiceEmbed], components: [privateVoiceButton] });
                    //@ts-ignore
                    await interaction.editReply({ embeds: [completedEmbed], ephemeral: true });
                    break;
                }
                else {
                    interaction.reply({
                        embeds: [Constants_1.noPermsEmbed],
                        ephemeral: true
                    });
                    break;
                }
        }
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5pdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21tYW5kcy9pbml0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsa0RBQTBEO0FBQzFELDJDQUE0STtBQUM1SSw2REFBcUM7QUFDckMsa0RBQXlGO0FBRXpGLGtCQUFlO0lBQ1gsSUFBSSxFQUFFLElBQUksOEJBQW1CLEVBQUU7U0FDMUIsT0FBTyxDQUFDLE1BQU0sQ0FBQztTQUNmLGNBQWMsQ0FBQywrQkFBK0IsQ0FBQztTQUMvQyxlQUFlLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHO1NBQ3RCLE9BQU8sQ0FBQyxTQUFTLENBQUM7U0FDbEIsY0FBYyxDQUFDLGdDQUFnQyxDQUFDO1NBQ2hELFNBQVMsQ0FBQyxjQUFjLEVBQUUsY0FBYyxDQUFDO1NBQ3pDLFNBQVMsQ0FBQyxTQUFTLEVBQUUsU0FBUyxDQUFDO1NBQy9CLFNBQVMsQ0FBQyxnQkFBZ0IsRUFBRSxjQUFjLENBQUM7U0FDM0MsU0FBUyxDQUFDLHNCQUFzQixFQUFFLE9BQU8sQ0FBQztTQUMxQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDM0IsR0FBRyxFQUFFLEtBQUssRUFBRSxXQUErQixFQUFFLEVBQUU7UUFDM0MsTUFBTSxXQUFXLEdBQWdDLFdBQVcsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEtBQUssQ0FBQztRQUMxRixNQUFNLG1CQUFtQixHQUFJLFdBQVcsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLGdCQUFNLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBaUIsQ0FBQTtRQUM5SCxNQUFNLGNBQWMsR0FBSSxXQUFXLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMs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QixDQUFDO3lCQUM5QixRQUFRLENBQUMsY0FBYyxDQUFDO3lCQUN4QixRQUFRLENBQUMsK0NBQStDLENBQUM7eUJBQ3pELFFBQVEsQ0FBQyxXQUFXLENBQUMsRUFDMUIsSUFBSSwwQkFBYSxFQUFFO3lCQUNkLFdBQVcsQ0FBQyx1QkFBdUIsQ0FBQzt5QkFDcEMsUUFBUSxDQUFDLGNBQWMsQ0FBQzt5QkFDeEIsUUFBUSxDQUFDLGdDQUFnQyxDQUFDO3lCQUMxQyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQzFCLENBQUM7b0JBRU4sTUFBTSxtQkFBbUIsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUM7b0JBQzFDLE1BQU0sbUJBQW1CLENBQUMsSUFBSSxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsaUJBQWlCLENBQUMsRUFBRSxVQUFVLEVBQUUsQ0FBQyxrQkFBa0IsQ0FBQyxFQUFFLENBQUMsQ0FBQztvQkFDbEcsWUFBWTtvQkFDWixNQUFNLFdBQVcsQ0FBQyxTQUFTLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxjQUFjLENBQUMsRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztvQkFDM0UsTUFBTTtpQkFDVDtxQkFBTTtvQkFDSCxXQUFXLENBQUMsS0FBSyxDQUFDO3dCQUNkLE1BQU0sRUFBRSxDQUFFLHdCQUFZLENBQUU7d0JBQ3hCLFNBQVMsRUFBRSxJQUFJO3FCQUNsQixDQUFDLENBQUM7b0JBQ0gsTUFBTTtpQkFDVDtTQUNSO0lBQ0wsQ0FBQztDQUNKLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTbGFzaENvbW1hbmRCdWlsZGVyIH0gZnJvbSBcIkBkaXNjb3JkanMvYnVpbGRlcnNcIjtcclxuaW1wb3J0IHsgQ29tbWFuZEludGVyYWN0aW9uLCBHdWlsZE1lbWJlciwgTWVzc2FnZUFjdGlvblJvdywgTWVzc2FnZUJ1dHRvbiwgTWVzc2FnZUVtYmVkLCBNZXNzYWdlU2VsZWN0TWVudSwgVGV4dENoYW5uZWwgfSBmcm9tIFwiZGlzY29yZC5qc1wiO1xyXG5pbXBvcnQgY29uZmlnIGZyb20gXCIuLi91dGlscy9Db25maWdcIjtcclxuaW1wb3J0IHsgYXBwbHlUaWNrZXRCdXR0b24sIG5vUGVybXNFbWJlZCwgbm9ybWFsVGlja2V0QnV0dG9uIH0gZnJvbSBcIi4uL3V0aWxzL0NvbnN0YW50c1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gICAgZGF0YTogbmV3IFNsYXNoQ29tbWFuZEJ1aWxkZXIoKVxyXG4gICAgICAgIC5zZXROYW1lKFwiaW5pdFwiKVxyXG4gICAgICAgIC5zZXREZXNjcmlwdGlvbihcIkluaXRzIGEgc3BlY2lmaWMgYm90IG1lc3NhZ2UuXCIpXHJcbiAgICAgICAgLmFkZFN0cmluZ09wdGlvbihvcHQgPT4gb3B0XHJcbiAgICAgICAgICAgIC5zZXROYW1lKFwibWVzc2FnZVwiKVxyXG4gICAgICAgICAgICAuc2V0RGVzY3JpcHRpb24oXCJTZWxlY3QgdGhlIGJvdCBtZXNzYWdlIHRvIGluaXRcIilcclxuICAgICAgICAgICAgLmFkZENob2ljZShcIlZlcmlmaWNhdGlvblwiLCBcInZlcmlmaWNhdGlvblwiKVxyXG4gICAgICAgICAgICAuYWRkQ2hvaWNlKFwiVGlja2V0c1wiLCBcInRpY2tldHNcIilcclxuICAgICAgICAgICAgLmFkZENob2ljZShcIlByaXZhdGUgVm9pY2VzXCIsIFwicHJpdmF0ZXZvaWNlXCIpXHJcbiAgICAgICAgICAgIC5hZGRDaG9pY2UoXCJSb2xlcyAoUmVxdWlyZXMgQ0VPKVwiLCBcInJvbGVzXCIpXHJcbiAgICAgICAgICAgIC5zZXRSZXF1aXJlZCh0cnVlKSksXHJcbiAgICBydW46IGFzeW5jIChpbnRlcmFjdGlvbjogQ29tbWFuZEludGVyYWN0aW9uKSA9PiB7XHJcbiAgICAgICAgY29uc3QgYXBwbGljYXRpb246IChzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuKSA9IGludGVyYWN0aW9uLm9wdGlvbnMuZ2V0KFwibWVzc2FnZVwiKS52YWx1ZTtcclxuICAgICAgICBjb25zdCB2ZXJpZmljYXRpb25DaGFubmVsID0gKGludGVyYWN0aW9uLmd1aWxkLmNoYW5uZWxzLmNhY2hlLmZpbmQoYyA9PiBjLmlkID09PSBjb25maWcuY2hhbm5lbHMudmVyaWZpY2F0aW9uKSBhcyBUZXh0Q2hhbm5lbClcclxuICAgICAgICBjb25zdCB0aWNrZXRzQ2hhbm5lbCA9IChpbnRlcmFjdGlvbi5ndWlsZC5jaGFubmVscy5jYWNoZS5maW5kKGMgPT4gYy5pZCA9PT0gY29uZmlnLmNoYW5uZWxzLnRpY2tldHMpIGFzIFRleHRDaGFubmVsKTtcclxuICAgICAgICBjb25zdCByb2xlc0NoYW5uZWwgPSAoaW50ZXJhY3Rpb24uZ3VpbGQuY2hhbm5lbHMuY2FjaGUuZmluZChjID0+IGMuaWQgPT09IGNvbmZpZy5jaGFubmVscy5yb2xlcykgYXMgVGV4dENoYW5uZWwpO1xyXG4gICAgICAgIGNvbnN0IHByaXZhdGVWb2ljZUNoYW5uZWwgPSAoaW50ZXJhY3Rpb24uZ3VpbGQuY2hhbm5lbHMuY2FjaGUuZmluZChjID0+IGMuaWQgPT09IGNvbmZpZy5jaGFubmVscy5wcml2YXRlVm9pY2UpIGFzIFRleHRDaGFubmVsKTtcclxuICAgICAgICAvL0B0cy1pZ25vcmVcclxuICAgICAgICBjb25zdCBtZW1iZXI6IEd1aWxkTWVtYmVyID0gaW50ZXJhY3Rpb24uZ3VpbGQubWVtYmVycy5jYWNoZS5maW5kKChtOiBHdWlsZE1lbWJlcikgPT4gbS5pZCA9PT0gaW50ZXJhY3Rpb24ubWVtYmVyLmlkKTtcclxuICAgICAgICBjb25zdCBjb21wbGV0ZWRFbWJlZDogTWVzc2FnZUVtYmVkID0gbmV3IE1lc3NhZ2VFbWJlZCgpXHJcbiAgICAgICAgICAgIC5zZXRUaXRsZShcIjp3aGl0ZV9jaGVja19tYXJrOiB8IERvbmUhXCIpXHJcbiAgICAgICAgICAgIC5zZXREZXNjcmlwdGlvbihcIlRoZSBtZXNzYWdlIGhhcyBiZWVuIHNlbnQgc3VjY2Vzc2Z1bGx5XCIpXHJcbiAgICAgICAgICAgIC5zZXRDb2xvcihcIkdSRUVOXCIpXHJcbiAgICAgICAgICAgIC5zZXRUaW1lc3RhbXAoKTtcclxuXHJcbiAgICAgICAgYXdhaXQgaW50ZXJhY3Rpb24uZGVmZXJSZXBseSh7IGVwaGVtZXJhbDogdHJ1ZSB9KTtcclxuXHJcbiAgICAgICAgc3dpdGNoIChhcHBsaWNhdGlvbikge1xyXG4gICAgICAgICAgICBjYXNlIFwidmVyaWZpY2F0aW9uXCI6XHJcbiAgICAgICAgICAgICAgICBpZiAobWVtYmVyLnBlcm1pc3Npb25zLmhhcyhcIkFETUlOSVNUUkFUT1JcIikgfHwgbWVtYmVyLnJvbGVzLmNhY2hlLmZpbmQociA9PiByLmlkID09PSBjb25maWcucm9sZXMuc3RhZmYpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmVyaWZpY2F0aW9uQnV0dG9uOiBNZXNzYWdlQWN0aW9uUm93ID0gbmV3IE1lc3NhZ2VBY3Rpb25Sb3coKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50cyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBNZXNzYWdlQnV0dG9uKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0Q3VzdG9tSWQoJ3ZlcmlmaWNhdGlvbkJ0bicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldExhYmVsKCdWZXJpZnknKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRFbW9qaSgn4pyFJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0U3R5bGUoJ1NVQ0NFU1MnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2ZXJpZmljYXRpb25FbWJlZDogTWVzc2FnZUVtYmVkID0gbmV3IE1lc3NhZ2VFbWJlZCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRDb2xvcignI0VFMDAwMCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZSgnVmVyaWZ5IHlvdXJzZWxmJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldERlc2NyaXB0aW9uKCc6ZmxhZ19lczogVmVyaWZpY2F0ZSBwYXJhIG9idGVuZXIgYWNjZXNvIGFsIHJlc3RvIGRlbCBzZXJ2aWRvciwgZW4gY2FzbyBkZSB0ZW5lciBhbGd1biBwcm9ibGVtYSBubyBkdWRlcyBlbiBtYW5kYXJsZSB1biBNRCBhIGxvcyBzdGFmZnMhXFxuXFxuOmZsYWdfdXM6IFZlcmlmeSB5b3Vyc2VsZiB0byBnYWluIGFjY2VzcyB0byB0aGUgcmVzdCBvZiB0aGUgc2VydmVyLCBpbiBjYXNlIG9mIGhhdmluZyBhbnkgcHJvYmxlbSB2ZXJpZnlpbmcgZG9uXFwndCB0aGluayB0d2ljZSwgYW5kIERNIGEgU3RhZmYnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdmVyaWZpY2F0aW9uQ2hhbm5lbC5idWxrRGVsZXRlKDEwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdmVyaWZpY2F0aW9uQ2hhbm5lbC5zZW5kKHsgZW1iZWRzOiBbdmVyaWZpY2F0aW9uRW1iZWRdLCBjb21wb25lbnRzOiBbdmVyaWZpY2F0aW9uQnV0dG9uXSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAvL0B0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBpbnRlcmFjdGlvbi5lZGl0UmVwbHkoeyBlbWJlZHM6IFtjb21wbGV0ZWRFbWJlZF0sIGVwaGVtZXJhbDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJhY3Rpb24ucmVwbHkoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbWJlZHM6IFsgbm9QZXJtc0VtYmVkIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVwaGVtZXJhbDogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFwidGlja2V0c1wiOlxyXG4gICAgICAgICAgICAgICAgaWYgKG1lbWJlci5wZXJtaXNzaW9ucy5oYXMoXCJBRE1JTklTVFJBVE9SXCIpIHx8IG1lbWJlci5yb2xlcy5jYWNoZS5maW5kKHIgPT4gci5pZCA9PT0gY29uZmlnLnJvbGVzLnN0YWZmKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpY2tldHNFbWJlZDogTWVzc2FnZUVtYmVkID0gbmV3IE1lc3NhZ2VFbWJlZCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRDb2xvcignI0VFMDAwMCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZSgnVGlja2V0cycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXREZXNjcmlwdGlvbignOmZsYWdfZXM6IEhheiBjbGljayBhYmFqbyBwYXJhIGFicmlyIHVuIHRpY2tldFxcblxcbjpmbGFnX3VzOiBDbGljayBkb3duIGJlbG93IHRvIG9wZW4gYSBUaWNrZXQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGlja2V0c0NoYW5uZWwuYnVsa0RlbGV0ZSgxMDApO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRpY2tldHNDaGFubmVsLnNlbmQoeyBlbWJlZHM6IFt0aWNrZXRzRW1iZWRdLCBjb21wb25lbnRzOiBbbm9ybWFsVGlja2V0QnV0dG9uLCBhcHBseVRpY2tldEJ1dHRvbl0gfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9AdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaW50ZXJhY3Rpb24uZWRpdFJlcGx5KHsgZW1iZWRzOiBbY29tcGxldGVkRW1iZWRdLCBlcGhlbWVyYWw6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGludGVyYWN0aW9uLnJlcGx5KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW1iZWRzOiBbIG5vUGVybXNFbWJlZCBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcGhlbWVyYWw6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBcInJvbGVzXCI6XHJcbiAgICAgICAgICAgICAgICBpZiAobWVtYmVyLnBlcm1pc3Npb25zLmhhcyhcIkFETUlOSVNUUkFUT1JcIikgfHwgbWVtYmVyLnJvbGVzLmNhY2hlLmZpbmQociA9PiByLmlkID09PSBjb25maWcucm9sZXMuY2VvKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvbGVzUm93OiBNZXNzYWdlQWN0aW9uUm93ID0gbmV3IE1lc3NhZ2VBY3Rpb25Sb3coKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ29tcG9uZW50cyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBNZXNzYWdlU2VsZWN0TWVudSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldEN1c3RvbUlkKCdyb2xlcycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiTm8gcm9sZXMgc2VsZWN0ZWQhXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldE1pblZhbHVlcygxKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb25zKFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdFdGhpY2FsIEhhY2tlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJzg4ODUxMjkwMTU2MjkyNTA2NicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbW9qaTogJ/CflKcnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnUGVudGVzdGVyJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnODg4NTE0Njk2MTA0Mjc1OTY4JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtb2ppOiAn8J+qkydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdDeWJlciBTZWN1cml0eScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJzg4ODUxMzc1MTkzMjg4NzA0MScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbW9qaTogJ/CflJAnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnR2FtZSBEZXYnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICc4ODg1NDM4MDE1ODc2NjI4NzgnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1vamk6ICfwn5G+J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ0Rpc2NvcmQgQm90IERldicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJzg4ODUxOTI3MzgzODk0NDI5OCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbW9qaTogJ+KamSdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdGdWxsLVN0YWNrJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnODg4NTEwMTE3MTU3NDM3NDYxJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtb2ppOiAn8J+lhydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdCYWNrLUVuZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJzg4ODUwODI4NjQzNjAxMjEzMicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbW9qaTogJ/CfkaUnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnRnJvbnQtRW5kJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnODg4NTA1MzU4ODA3NjI5ODI0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtb2ppOiAn8J+OqCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdVWC9VSScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJzg4ODUzMTAzNTA4MjYwMDQ5OScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbW9qaTogJ/Cfk5UnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnR3JhcGhpYyBEZXNpZ25lcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJzg4ODUxMjQ3MTU1NDQ2NTgwMicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbW9qaTogJ/CfjoknXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByb2xlc0VtYmVkOiBNZXNzYWdlRW1iZWQgPSBuZXcgTWVzc2FnZUVtYmVkKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldENvbG9yKFwiI0VFMDAwMFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUoXCJSb2xlc1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0RGVzY3JpcHRpb24oXCI6ZmxhZ19lczogU2VsZWNjaW9uYSB0dXMgcm9sZXMgZW4gZGVwZW5kZW5jaWEgZGUgdHVzIGNvbm9jaW1pZW50b3NcXG5cXG46ZmxhZ191czogU2VsZWN0IHlvdXIgcm9sZXMgaW4gZGVwZW5kYW5jZSBvZiB5b3VyIGtub3dsZWRnZVwiKVxyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHJvbGVzQ2hhbm5lbC5idWxrRGVsZXRlKDEwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcm9sZXNDaGFubmVsLnNlbmQoeyBlbWJlZHM6IFtyb2xlc0VtYmVkXSwgY29tcG9uZW50czogW3JvbGVzUm93XSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAvL0B0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBpbnRlcmFjdGlvbi5lZGl0UmVwbHkoeyBlbWJlZHM6IFtjb21wbGV0ZWRFbWJlZF0sIGVwaGVtZXJhbDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJhY3Rpb24ucmVwbHkoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbWJlZHM6IFsgbm9QZXJtc0VtYmVkIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVwaGVtZXJhbDogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFwicHJpdmF0ZXZvaWNlXCI6XHJcbiAgICAgICAgICAgICAgICBpZiAobWVtYmVyLnBlcm1pc3Npb25zLmhhcyhcIkFETUlOSVNUUkFUT1JcIikgfHwgbWVtYmVyLnJvbGVzLmNhY2hlLmZpbmQociA9PiByLmlkID09PSBjb25maWcucm9sZXMuc3RhZmYpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJpdmF0ZVZvaWNlRW1iZWQ6IE1lc3NhZ2VFbWJlZCA9IG5ldyBNZXNzYWdlRW1iZWQoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0Q29sb3IoJyNFRTAwMDAnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUoJ1ByaXZhdGUgVm9pY2VzJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldERlc2NyaXB0aW9uKCc6ZmxhZ19lczogSGF6IGNsaWNrIGFiYWpvIHBhcmEgY3JlYXIgdMO6IHZveiBwcml2YWRhXFxuXFxuOmZsYWdfdXM6IENsaWNrIGRvd24gYmVsb3cgdG8gY3JlYXRlIHlvdXIgcHJpdmF0ZSB2b2ljZSBjaGFubmVsJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByaXZhdGVWb2ljZUJ1dHRvbjogTWVzc2FnZUFjdGlvblJvdyA9IG5ldyBNZXNzYWdlQWN0aW9uUm93KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENvbXBvbmVudHMoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTWVzc2FnZUJ1dHRvbigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldEN1c3RvbUlkKCdwcml2YXRlVm9pY2VCdG4nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRMYWJlbCgnQ3JlYXRlIFZvaWNlJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0RW1vamkoJzw6ZGlzY29yZF92b2ljZV9mcm9tX1ZFR0E6ODk5NzA5MDAwMTEzODY4OTIwPicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldFN0eWxlKCdTRUNPTkRBUlknKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBNZXNzYWdlQnV0dG9uKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0Q3VzdG9tSWQoJ2RlbGV0ZVByaXZhdGVWb2ljZUJ0bicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldExhYmVsKCdEZWxldGUgVm9pY2UnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRFbW9qaSgnPDp0cmFzaGNhbjo5MDA0MjEwNDg2NDkwMTUzNzY+JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0U3R5bGUoXCJEQU5HRVJcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcHJpdmF0ZVZvaWNlQ2hhbm5lbC5idWxrRGVsZXRlKDEwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcHJpdmF0ZVZvaWNlQ2hhbm5lbC5zZW5kKHsgZW1iZWRzOiBbcHJpdmF0ZVZvaWNlRW1iZWRdLCBjb21wb25lbnRzOiBbcHJpdmF0ZVZvaWNlQnV0dG9uXSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAvL0B0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBpbnRlcmFjdGlvbi5lZGl0UmVwbHkoeyBlbWJlZHM6IFtjb21wbGV0ZWRFbWJlZF0sIGVwaGVtZXJhbDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJhY3Rpb24ucmVwbHkoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbWJlZHM6IFsgbm9QZXJtc0VtYmVkIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVwaGVtZXJhbDogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSJdfQ==